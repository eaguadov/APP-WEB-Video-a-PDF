<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Convierte videos de presentaciones PPT o Genially a PDF extrayendo diapositivas √∫nicas">
    <title>Video a PDF - Extractor de Diapositivas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üìπ Video a PDF</h1>
            <p class="subtitle">Extrae diapositivas √∫nicas de tus videos de presentaciones</p>
        </header>

        <!-- Upload Section -->
        <section id="uploadSection" class="card">
            <div class="upload-zone" id="uploadZone">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text">Arrastra tu video aqu√≠ o haz clic para seleccionar</div>
                <div class="upload-hint">Formatos soportados: MP4, WebM, MOV</div>
                <input type="file" id="fileInput" accept="video/mp4,video/webm,video/quicktime">
            </div>
        </section>

        <!-- Video Preview Section -->
        <section id="videoSection" class="card hidden">
            <h2 class="card-title">Vista Previa del Video</h2>
            <video id="videoPreview" controls></video>
            
            <div class="video-info" id="videoInfo">
                <div class="video-info-item">
                    <span class="video-info-label">Duraci√≥n</span>
                    <span class="video-info-value" id="videoDuration">--</span>
                </div>
                <div class="video-info-item">
                    <span class="video-info-label">Dimensiones</span>
                    <span class="video-info-value" id="videoDimensions">--</span>
                </div>
                <div class="video-info-item">
                    <span class="video-info-label">Tama√±o</span>
                    <span class="video-info-value" id="videoSize">--</span>
                </div>
            </div>
        </section>

        <!-- Controls Section -->
        <section id="controlsSection" class="card hidden">
            <h2 class="card-title">‚öôÔ∏è Configuraci√≥n de Extracci√≥n</h2>
            
            <div class="controls">
                <div class="control-group">
                    <label>
                        Sensibilidad de Detecci√≥n de Duplicados
                        <span class="slider-value" id="sensitivityValue">95%</span>
                    </label>
                    <input 
                        type="range" 
                        id="sensitivitySlider" 
                        min="80" 
                        max="99" 
                        value="95" 
                        step="1"
                    >
                    <small style="color: var(--text-muted);">
                        Mayor valor = menos duplicados (m√°s estricto)
                    </small>
                </div>

                <div class="control-group">
                    <label>
                        Velocidad de Muestreo
                        <span class="slider-value" id="samplingValue">1 frame/seg</span>
                    </label>
                    <input 
                        type="range" 
                        id="samplingSlider" 
                        min="0.5" 
                        max="3" 
                        value="1" 
                        step="0.5"
                    >
                    <small style="color: var(--text-muted);">
                        Menor valor = m√°s frames analizados (m√°s preciso pero m√°s lento)
                    </small>
                </div>

                <button class="btn btn-primary btn-full" id="extractBtn">
                    üé¨ Extraer Diapositivas
                </button>
            </div>
        </section>

        <!-- Progress Section -->
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Procesando...</div>
        </div>

        <!-- Frame Gallery Section -->
        <section id="gallerySection" class="card hidden">
            <h2 class="card-title">üñºÔ∏è Diapositivas Detectadas</h2>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">
                Haz clic en las im√°genes para incluir/excluir. Haz clic en ‚ùå para eliminar.
            </p>
            
            <div id="frameGallery" class="frame-gallery"></div>
            
            <div class="empty-state" id="emptyState">
                <div class="empty-state-icon">üì≠</div>
                <p>No se detectaron diapositivas a√∫n</p>
            </div>

            <button class="btn btn-primary btn-full hidden" id="generatePdfBtn">
                üìÑ Generar PDF
            </button>
        </section>
    </div>

    <!-- Canvas for frame extraction (hidden) -->
    <canvas id="hiddenCanvas" style="display: none;"></canvas>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    
    <!-- Main Application -->
    <script src="app.js"></script>
</body>
</html>
